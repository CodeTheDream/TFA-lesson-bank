<%= javascript_pack_tag 'courses', 'data-turbolinks-track': 'reload' %>

<div class="course-form-container">
  <div class="set-size-and-position">
      <div class="blue-header"></div>    
      <div id="selectedCourseId" class="ml-4 mt-4 set-height" >
      <%= select_tag :course, options_from_collection_for_select(@courses, "id", "title", "New"), { required: true } %>
      <small class="form-text text-muted">Course</small>
    </div>
    <div id="courseForm">
      <%= render 'form', course: @course, available_grade_levels: @available_grade_levels, subjects: @subjects, states: @states, districts: @districts %>
    </div>
  </div>
</div>
<div class="lesson-form-container">
  <div id="lessonSide">
  </div>
</div>
        
<script type="text/javascript">
  $("#course").change(courseSelect);

  function courseSelect(){
    console.log('courseSelect called');
//    console.log( $("#course").val());
//    console.log('/courses/load_course?course_id=' + $("#course").val());
    $.ajax({
      url: '/courses/load_course?course_id=' + $("#course").val(),
      type: 'GET',
      success: function(r) {
        console.log("course ajax success!");
//        console.log(r);      
        //$('#courseForm').html(r)
        //$("#courseForm").html("<%#= escape_javascript(render partial: 'form', locals: { course: @course } ) %>");
      }
    });
  }
</script>
