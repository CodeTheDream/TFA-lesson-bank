<%= javascript_pack_tag 'courses', 'data-turbolinks-track': 'reload' %>
<%= form_for(@course) do |f| %>
  
  <% if @course.errors.any? %>
    <div id="error_explanation" class="my_alert">
      <h2><%= pluralize(@course.errors.count, "error") %> prohibited this course from being saved:</h2>
      <ul>
      <% @course.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="ml-4">
    <%= f.text_field :title, class: 'course-title', :required => true %>
  </div>

  <div class="ml-4 mt-1">
    <div class="district-label">
      DISTRICT: <%= f.select :district, options_for_select(@districts, @course.district), {}, {:class => 'district-dropdown'} %>
    </div>

    <div class="subject-label mt-1">
      SUBJECT: <%= f.select :subject, options_for_select(@subjects, @course.subject), {}, {:class => 'subject-dropdown'}  %>
    </div>

    <div class="row grade-description-container mt-1">      
      <div class="grade-label">GRADE:</div>
      <div class='grid-container-filter mb-2 checkbox-format course-checkboxes'>
          <% @available_grade_levels.each do |grade_level|%>
          <%= check_box_tag "grade_levels[#{grade_level.grade_level}]", true, f.object.grades.pluck(:grade_level).include?(grade_level.grade_level)%>
          <%= label_tag grade_level.grade_level, grade_level.grade_level  %>
        <%end%>
      </div>
      
      <div class="ml-4 move-description">
        <div class="course-description-label">DESCRIPTION:</div>
        <%= f.text_area :description, cols: 90, rows: 10, class: 'course-description-area', :required => true %>
      </div>
    </div>
  </div>
  
  <div class="pl-4 tag-button-container">
          <%= button_tag 'Add Tag', type: 'button', id: 'addTag', onclick: 'addTagField()' %>
    <ul id="myList" class="move-tag-list">
      <% @course.tags.each do |tag| %>	  
        <% time_stamp = Time.now.to_i %>	  
        <li><%= text_field :existing_tags, :tag_names["#{time_stamp}"], value: tag.name, class: 'tag-fields' %></li>
      <% end %>
    </ul>
    <div class="actions course-buttons-position">
      <% if @course&.id.present? %>
        <%= f.submit "Update Course", {:class => 'search_button form-button'} %>
        | <%= link_to 'New Document (Course)', new_course_document_path(@course.id), :class => "btn doc-button" %>
      <% else %>
        <%= f.submit "Create Course", {:class => 'search_button form-button'} %>
      <% end %>
    </div>
  </div>
<% end %>
