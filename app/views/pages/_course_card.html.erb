<div class="card h-100 search_card " >
  <div class="card-header"></div> 
  <div class= "text-right">
    <div id="circle"><h4 class="text-center">C</h4></div>
  </div> 
  <div class="card-body" >       
    <h2 class="card-title"><%= course.title.titleize %>
      <% if current_user == course.searchable.user || current_user&.role == 'admin'%>
        <%=link_to course_lesson_form_courses_path(course_id: course.searchable_id) do %> 
          <i class=" fa fa-pencil-alt pencil_edit_card"></i>        
        <%end%>  
      <% end %>         
    </h2>
    
    <div><span style="color: gray">SUBJECT:</span> <%= course.subject%></div>
    <div class="mb-2"><span style="color: gray">GRADE: </span><%= course.searchable.grades.pluck(:grade_level).join(', ') %></div>
    <% if course.tags.present? %>
      <% course.tags.split(' ').each do |tag| %> 
        <span style="background-color:white;color: gray;padding:2px;font-size:12px;"><%= tag.capitalize %></span>
      <%end%>
    <%end%>

    
    <div class="card-text  mt-3" >         
      <%= simple_format truncate(h(course.description.capitalize), length: 100, separator: ' ') %>
      <% if course.description.length >  100 %>
        <%= link_to "Read More", course_path(course), class:"read_more"%>
      <%end%>
    </div>   
  </div>
  <div class="text-center ">
    <div class="mt-2 "<span style="color: gray;font-size:10px; font-style:italic;">Created by  <%= course.searchable.user.name %></span></div>
    <div class="mt-2  mb-4 "<span style="color: gray;font-size:10px; font-style:italic;">Last Edited on <%= course.updated_at.to_date.strftime("%B %d, %Y")%> </span></div>
    <a href='/courses/<%="#{course.searchable_id}"%>' class="btn button_view_card right-arrow" onclick= 'checkUser();'>VIEW COURSE </a>
  </div>
</div>
<script type="text/javascript">
  function checkUser(){
    let usernil = "<%= @current_user.nil? %>";
    if (usernil === true){
      alert ("You need to login if you want to get access to the content");
    }else{
      return; 
    }
  }
</script>

