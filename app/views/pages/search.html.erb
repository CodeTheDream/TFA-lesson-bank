<%
=begin%>
<h1 class="mt-5">Search Results</h1>
<% @results.each do |result| %>
<h4><%= result.title %></h4><br>
<%end%>
<%
=end%>
<div class="grid-container">
  <div class="search-filter">
    
    <%= form_tag(search_page_path, :method => 'get') do -%>
      <div class="mb-4">
        <h5>Filters</h5>
        <small class="form-text text-muted">SUBJECT</small>
        <%= select_tag :subject, options_for_select(@subjects), { include_blank: true, class: 'form-control' } %>
      </div>
      <div class="mb-4">
        <small class="form-text text-muted">District</small>
        <%= select_tag :district, options_for_select(@districts), { include_blank: true, class: 'form-control' } %>
      </div>
      <div class="mb-4">
        <small class="form-text text-muted">Grade Level</small>
        <%= select_tag :grade_level, options_for_select(@available_grade_levels), { include_blank: true, class: 'form-control' } %>
      </div>
      <%= hidden_field_tag :search, @search %>
      <div class="text-center">
        <%= submit_tag "FILTER RESULTS", :class => 'btn button_filter my-2 my-sm-0' %>
      </div>
    <% end %>
  </div>
    <div class="main-result">
      <div class="search-bar">
        <%= form_tag(search_page_path, :method => 'get') do %>
          <div class=" form-inline">    
            <%= search_field_tag :search, params[:search], placeholder: 'Search Courses', class: "form-control mr-sm-2" %>
            <div class="input-group-btn ">
              <%= submit_tag "Search", :class => 'btn btn-outline-primary my-2 my-sm-0' %>
            </div>               
          </div>
        <% end %>
      </div>

      <div class="heading1-title">
        <p><b>RESULTS FOR: <%= params[:search] %></b></p>
      </div>
      <div class="cards row gx-lg-5">
        <% @results.each do |result| %>
          <div class="search_card" style=" width: 15rem;">
            <div class="card-header"></div>  
            <div class="card-body d-flex flex-column">              
              <div class="card-title">
                <h3><%= result.title %></h3>
              </div>
              <div class="mb-4">
                <h4><%= result.description %></h4>
              </div> 
              <div class="  text-center" >              
                <a href='/courses/<%="#{result.id}"%>'  class=" btn button_view_card text-center">VIEW COURSE</a>   
              </div>                  
            </div>
          </div>
        <% end %>
     </div>
     
   <div class="heading1-title">
     <h1>
       Best Rated
     </h1>
   </div>
   <div class="cards">
     <% @results.each do |result| %>
       <% if result.searchable_type == "Lesson" %>
         <%= render 'lesson_card', lesson: result %>
       <% else %>  
         <%= render 'course_card', course: result %>
       <% end %>  
     <%end%>
   </div>
 </div>
</div>
</div>




